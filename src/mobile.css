/* CNM Mobile Overrides — phones (≤560px)
   Header: fixed + top padding so tabs remain visible/clickable.
   Scan button: pill, horizontal text (no circle/vertical).
   Grow rows: single-column; order = Cost → Store → Edit; no overlap.
   Hides the GrowList header band on phones.
*/
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --mobile-header-h: 72px; /* bump if your header is taller */
}
@media (max-width: 560px){
  html, body { overflow-x: hidden; -webkit-text-size-adjust: 100%; }
  img, video, canvas, svg { max-width: 100%; height: auto; }
  * { box-sizing: border-box; overflow-wrap: anywhere; word-wrap: break-word; }

  /* Fixed header + reserved space */
  header, .app-header, [data-role*="header"], .topbar, .top-bar, .navbar {
    position: fixed !important;
    top: var(--safe-top) !important; left: 0 !important; right: 0 !important;
    z-index: 1000 !important;
    display: flex !important; align-items: center !important; justify-content: space-between !important;
    gap: 12px !important; padding: 8px 12px !important; min-height: var(--mobile-header-h) !important;
  }
  body { padding-top: calc(var(--mobile-header-h) + var(--safe-top)) !important; }
  #root > div:first-child, main, .main, .content, .page, .container, [data-role*="content"] {
    padding-top: max(0px, calc(var(--mobile-header-h) - 8px)) !important;
    scroll-padding-top: calc(var(--mobile-header-h) + 8px) !important;
  }

  /* Scan button → horizontal pill */
  header :is(.scan, [class*="scan"], [aria-label*="scan" i], [data-action*="scan" i], .rounded-full),
  .app-header :is(.scan, [class*="scan"], [aria-label*="scan" i], [data-action*="scan" i], .rounded-full) {
    display: inline-flex !important; flex-direction: row !important; align-items: center !important; justify-content: center !important;
    gap: 8px !important; padding: 8px 14px !important;
    width: auto !important; height: auto !important; aspect-ratio: auto !important;
    border-radius: 9999px !important; white-space: nowrap !important;
    writing-mode: horizontal-tb !important; transform: none !important; rotate: 0deg !important; line-height: 1.1 !important;
  }

  /* Grow list container safety */
  .grow-card, [data-role*="grow-card"], [class*="grow-card"] { overflow-x: clip !important; position: relative; z-index: 0; }
  .grow-card table { width: 100% !important; border-collapse: separate !important; }

  /* Hide the GrowList header band on phones */
  .rounded-xl > .grid.uppercase { display: none !important; }
  .grow-card thead { display: none !important; }

  /* Stack rows (role-based or table-based) */
  .grow-card tr, [role="table"] [role="row"] {
    display: flex !important; flex-direction: column !important; align-items: stretch !important; gap: 6px !important;
  }
  .grow-card td, .grow-card th { display: block !important; width: 100% !important; float: none !important; clear: both !important; }

  /* Neutralize absolute/rotated/vertical badges/bubbles */
  .grow-card :is([class*="badge"], [class*="pill"], [class*="chip"], [class*="absolute"]) {
    position: static !important; inset: auto !important; z-index: auto !important;
    transform: none !important; rotate: 0deg !important; float: none !important; clear: both !important; writing-mode: horizontal-tb !important;
  }

  /* Order: Cost → Store → Edit */
  [role="row"] > * { order: 0 !important; }
  [role="row"] > :nth-child(4), .grow-card tr > :nth-child(4) {
    order: 1 !important; text-align: right !important;
  }
  [role="row"] > :nth-child(5), .grow-card tr > :nth-child(5) {
    order: 3 !important; display: flex !important; flex-direction: column !important; align-items: flex-end !important; gap: 4px !important;
  }
  :is([role="row"], .grow-card) :is([class*="store"], [data-action="store"], a[href*="store" i], button[name*="store" i]) {
    order: 2 !important; align-self: flex-end !important;
    display: inline-flex !important; flex-direction: row !important; align-items: center !important; justify-content: center !important;
    white-space: nowrap !important; writing-mode: horizontal-tb !important; transform: none !important; rotate: 0deg !important;
    min-width: 64px !important; height: auto !important;
  }
  :is([role="row"], .grow-card) :is([class*="edit"], a[href*="edit" i], button[name*="edit" i]) {
    order: 3 !important; align-self: flex-end !important; display: inline-block !important; white-space: nowrap !important;
  }
}
